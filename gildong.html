<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸¸ë™ì´ì˜ ì½”ë”© ì¼ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            transition: background-color 0.3s, color 0.3s;
        }

        /* ë‹¤í¬ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #e0e0e0;
        }

        /* í—¤ë” ì˜ì—­ */
        header {
            background-color: #fff;
            padding: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }

        body.dark-mode header {
            background-color: #2d2d2d;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 28px;
            transition: color 0.3s;
        }

        body.dark-mode h1 {
            color: #e0e0e0;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ */
        nav {
            text-align: center;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        nav ul li {
            display: inline-block;
        }

        nav ul li a {
            text-decoration: none;
            color: #555;
            font-size: 16px;
            padding: 8px 16px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav ul li a:hover {
            background-color: #e8e8e8;
            color: #2c3e50;
        }

        body.dark-mode nav ul li a {
            color: #b0b0b0;
        }

        body.dark-mode nav ul li a:hover {
            background-color: #404040;
            color: #fff;
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        main {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
        }

        /* ì¼ê¸° ì‘ì„± í¼ */
        .diary-form {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
        }

        body.dark-mode .diary-form {
            background-color: #2d2d2d;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
            transition: color 0.3s;
        }

        body.dark-mode .form-group label {
            color: #e0e0e0;
        }

        .form-group input[type="text"],
        .form-group input[type="date"],
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: inherit;
            background-color: #fff;
            color: #333;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body.dark-mode .form-group input[type="text"],
        body.dark-mode .form-group input[type="date"],
        body.dark-mode .form-group textarea {
            background-color: #1a1a1a;
            color: #e0e0e0;
            border-color: #555;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="date"]:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        body.dark-mode .form-group input[type="text"]:focus,
        body.dark-mode .form-group input[type="date"]:focus,
        body.dark-mode .form-group textarea:focus {
            border-color: #5dade2;
        }

        .form-group textarea {
            min-height: 200px;
            resize: vertical;
        }

        .submit-btn {
            background-color: #3498db;
            color: #fff;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #2980b9;
        }

        .btn-container {
            text-align: center;
            margin-top: 20px;
        }

        /* ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ */
        .dark-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #3498db;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.2s;
            z-index: 1000;
        }

        .dark-mode-toggle:hover {
            background-color: #2980b9;
            transform: scale(1.05);
        }

        body.dark-mode .dark-mode-toggle {
            background-color: #5dade2;
        }

        body.dark-mode .dark-mode-toggle:hover {
            background-color: #3498db;
        }

        h2 {
            transition: color 0.3s;
        }

        body.dark-mode h2 {
            color: #e0e0e0;
        }

        /* ì¼ê¸° ëª©ë¡ ì˜ì—­ */
        .diary-list {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-top: 30px;
            transition: background-color 0.3s;
        }

        body.dark-mode .diary-list {
            background-color: #2d2d2d;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .diary-item {
            padding: 15px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .diary-item:hover {
            background-color: #f8f9fa;
            border-color: #3498db;
        }

        body.dark-mode .diary-item {
            border-color: #555;
        }

        body.dark-mode .diary-item:hover {
            background-color: #404040;
            border-color: #5dade2;
        }

        .diary-item-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            transition: color 0.3s;
        }

        body.dark-mode .diary-item-title {
            color: #e0e0e0;
        }

        .diary-item-date {
            font-size: 14px;
            color: #888;
            transition: color 0.3s;
        }

        body.dark-mode .diary-item-date {
            color: #b0b0b0;
        }

        .diary-item-preview {
            font-size: 14px;
            color: #666;
            margin-top: 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            transition: color 0.3s;
        }

        body.dark-mode .diary-item-preview {
            color: #b0b0b0;
        }

        /* ì¼ê¸° ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ */
        .diary-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .diary-modal.active {
            display: flex;
        }

        .diary-modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
        }

        body.dark-mode .diary-modal-content {
            background-color: #2d2d2d;
        }

        .diary-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .diary-modal-title {
            font-size: 24px;
            color: #2c3e50;
            transition: color 0.3s;
        }

        body.dark-mode .diary-modal-title {
            color: #e0e0e0;
        }

        .diary-modal-date {
            font-size: 14px;
            color: #888;
            margin-bottom: 20px;
            transition: color 0.3s;
        }

        body.dark-mode .diary-modal-date {
            color: #b0b0b0;
        }

        .diary-modal-body {
            color: #333;
            line-height: 1.8;
            white-space: pre-wrap;
            transition: color 0.3s;
        }

        body.dark-mode .diary-modal-body {
            color: #e0e0e0;
        }

        .close-btn {
            background-color: #e74c3c;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .close-btn:hover {
            background-color: #c0392b;
        }

        .empty-message {
            text-align: center;
            color: #888;
            padding: 40px;
            transition: color 0.3s;
        }

        body.dark-mode .empty-message {
            color: #b0b0b0;
        }

        /* í°íŠ¸ í¬ê¸° ì¡°ì ˆ ë²„íŠ¼ */
        .font-size-controls {
            position: fixed;
            top: 20px;
            right: 180px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .font-size-btn {
            background-color: #27ae60;
            color: #fff;
            border: none;
            padding: 12px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: background-color 0.3s, transform 0.2s;
            min-width: 45px;
        }

        .font-size-btn:hover {
            background-color: #229954;
            transform: scale(1.05);
        }

        body.dark-mode .font-size-btn {
            background-color: #52be80;
        }

        body.dark-mode .font-size-btn:hover {
            background-color: #27ae60;
        }

        /* í°íŠ¸ í¬ê¸° ì¡°ì ˆ í´ë˜ìŠ¤ */
        body.font-small {
            font-size: 14px;
        }

        body.font-normal {
            font-size: 16px;
        }

        body.font-large {
            font-size: 18px;
        }

        body.font-xlarge {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="font-size-controls">
        <button class="font-size-btn" id="fontDecrease" title="ê¸€ì í¬ê¸° ì¤„ì´ê¸°">A-</button>
        <button class="font-size-btn" id="fontIncrease" title="ê¸€ì í¬ê¸° ëŠ˜ë¦¬ê¸°">A+</button>
    </div>
    <button class="dark-mode-toggle" id="darkModeToggle">ğŸŒ™ ë‹¤í¬ëª¨ë“œ</button>
    
    <header>
        <div class="container">
            <h1>ê¸¸ë™ì´ì˜ ì½”ë”© ì¼ê¸°</h1>
            <nav>
                <ul>
                    <li><a href="#" id="navHome">í™ˆ</a></li>
                    <li><a href="#" id="navWrite">ì¼ê¸°ì“°ê¸°</a></li>
                    <li><a href="#" id="navList">ëª©ë¡</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="diary-form" id="diaryForm">
            <h2 style="margin-bottom: 20px;">ì¼ê¸° ì‘ì„±</h2>
            <form id="diaryFormElement">
                <div class="form-group">
                    <label for="title">ì œëª©</label>
                    <input type="text" id="title" name="title" placeholder="ì¼ê¸° ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                </div>
                
                <div class="form-group">
                    <label for="date">ë‚ ì§œ</label>
                    <input type="date" id="date" name="date" required>
                </div>
                
                <div class="form-group">
                    <label for="content">ë‚´ìš©</label>
                    <textarea id="content" name="content" placeholder="ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”..." required></textarea>
                </div>
                
                <div class="btn-container">
                    <button type="submit" class="submit-btn">ì €ì¥í•˜ê¸°</button>
                </div>
            </form>
        </div>

        <div class="diary-list" id="diaryList">
            <h2 style="margin-bottom: 20px;">ì €ì¥ëœ ì¼ê¸° ëª©ë¡</h2>
            <div id="diaryListContainer">
                <!-- ì¼ê¸° ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </main>

    <!-- ì¼ê¸° ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ -->
    <div class="diary-modal" id="diaryModal">
        <div class="diary-modal-content">
            <div class="diary-modal-header">
                <h3 class="diary-modal-title" id="modalTitle"></h3>
                <button class="close-btn" id="closeModal">ë‹«ê¸°</button>
            </div>
            <div class="diary-modal-date" id="modalDate"></div>
            <div class="diary-modal-body" id="modalContent"></div>
        </div>
    </div>

    <script>
        // ë‹¤í¬ëª¨ë“œ í† ê¸€ ê¸°ëŠ¥
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;

        // localStorageì—ì„œ ë‹¤í¬ëª¨ë“œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        const isDarkMode = localStorage.getItem('darkMode') === 'true';

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë‹¤í¬ëª¨ë“œ ì„¤ì • ì ìš©
        if (isDarkMode) {
            body.classList.add('dark-mode');
            darkModeToggle.textContent = 'â˜€ï¸ ë¼ì´íŠ¸ëª¨ë“œ';
        }

        // ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        darkModeToggle.addEventListener('click', function() {
            body.classList.toggle('dark-mode');
            
            // ë‹¤í¬ëª¨ë“œ ìƒíƒœì— ë”°ë¼ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
            if (body.classList.contains('dark-mode')) {
                darkModeToggle.textContent = 'â˜€ï¸ ë¼ì´íŠ¸ëª¨ë“œ';
                localStorage.setItem('darkMode', 'true');
            } else {
                darkModeToggle.textContent = 'ğŸŒ™ ë‹¤í¬ëª¨ë“œ';
                localStorage.setItem('darkMode', 'false');
            }
        });

        // í°íŠ¸ í¬ê¸° ì¡°ì ˆ ê¸°ëŠ¥
        const fontDecreaseBtn = document.getElementById('fontDecrease');
        const fontIncreaseBtn = document.getElementById('fontIncrease');
        
        // í°íŠ¸ í¬ê¸° ë ˆë²¨ ì •ì˜
        const fontSizes = ['font-small', 'font-normal', 'font-large', 'font-xlarge'];
        const defaultFontSize = 'font-normal';
        
        // localStorageì—ì„œ í°íŠ¸ í¬ê¸° ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        let currentFontSize = localStorage.getItem('fontSize') || defaultFontSize;
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ í°íŠ¸ í¬ê¸° ì„¤ì • ì ìš©
        body.classList.add(currentFontSize);
        
        // í°íŠ¸ í¬ê¸° ì¡°ì ˆ í•¨ìˆ˜
        function adjustFontSize(direction) {
            const currentIndex = fontSizes.indexOf(currentFontSize);
            let newIndex;
            
            if (direction === 'increase') {
                newIndex = Math.min(currentIndex + 1, fontSizes.length - 1);
            } else {
                newIndex = Math.max(currentIndex - 1, 0);
            }
            
            // ê¸°ì¡´ í°íŠ¸ í¬ê¸° í´ë˜ìŠ¤ ì œê±°
            body.classList.remove(...fontSizes);
            
            // ìƒˆë¡œìš´ í°íŠ¸ í¬ê¸° í´ë˜ìŠ¤ ì¶”ê°€
            currentFontSize = fontSizes[newIndex];
            body.classList.add(currentFontSize);
            
            // localStorageì— ì €ì¥
            localStorage.setItem('fontSize', currentFontSize);
        }
        
        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        fontIncreaseBtn.addEventListener('click', function() {
            adjustFontSize('increase');
        });
        
        fontDecreaseBtn.addEventListener('click', function() {
            adjustFontSize('decrease');
        });

        // ì¼ê¸° ì €ì¥ ê´€ë ¨ ë³€ìˆ˜ ë° í•¨ìˆ˜
        const STORAGE_KEY = 'diaryEntries';
        const diaryForm = document.getElementById('diaryFormElement');
        const diaryListContainer = document.getElementById('diaryListContainer');
        const diaryModal = document.getElementById('diaryModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalDate = document.getElementById('modalDate');
        const modalContent = document.getElementById('modalContent');
        const closeModalBtn = document.getElementById('closeModal');

        // localStorageì—ì„œ ì¼ê¸° ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
        function getDiaries() {
            const diariesJson = localStorage.getItem(STORAGE_KEY);
            return diariesJson ? JSON.parse(diariesJson) : [];
        }

        // localStorageì— ì¼ê¸° ì €ì¥í•˜ê¸°
        function saveDiary(diary) {
            const diaries = getDiaries();
            // ê³ ìœ  ID ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ ì‚¬ìš©)
            diary.id = Date.now().toString();
            diary.createdAt = new Date().toISOString();
            diaries.unshift(diary); // ìµœì‹  ì¼ê¸°ê°€ ìœ„ì— ì˜¤ë„ë¡
            localStorage.setItem(STORAGE_KEY, JSON.stringify(diaries));
        }

        // ì¼ê¸° ëª©ë¡ í‘œì‹œí•˜ê¸°
        function displayDiaries() {
            const diaries = getDiaries();
            diaryListContainer.innerHTML = '';

            if (diaries.length === 0) {
                diaryListContainer.innerHTML = '<div class="empty-message">ì €ì¥ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ì¼ê¸°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!</div>';
                return;
            }

            diaries.forEach(diary => {
                const diaryItem = document.createElement('div');
                diaryItem.className = 'diary-item';
                diaryItem.dataset.id = diary.id;

                // ë‚ ì§œ í¬ë§·íŒ…
                const dateObj = new Date(diary.date);
                const formattedDate = dateObj.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });

                // ë‚´ìš© ë¯¸ë¦¬ë³´ê¸° (ìµœëŒ€ 50ì)
                const preview = diary.content.length > 50 
                    ? diary.content.substring(0, 50) + '...' 
                    : diary.content;

                diaryItem.innerHTML = `
                    <div class="diary-item-title">${diary.title}</div>
                    <div class="diary-item-date">${formattedDate}</div>
                    <div class="diary-item-preview">${preview}</div>
                `;

                // í´ë¦­ ì‹œ ìƒì„¸ ë³´ê¸°
                diaryItem.addEventListener('click', () => {
                    showDiaryDetail(diary);
                });

                diaryListContainer.appendChild(diaryItem);
            });
        }

        // ì¼ê¸° ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ í‘œì‹œ
        function showDiaryDetail(diary) {
            const dateObj = new Date(diary.date);
            const formattedDate = dateObj.toLocaleDateString('ko-KR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });

            modalTitle.textContent = diary.title;
            modalDate.textContent = formattedDate;
            modalContent.textContent = diary.content;
            diaryModal.classList.add('active');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            diaryModal.classList.remove('active');
        }

        // í¼ ì œì¶œ ì´ë²¤íŠ¸ ì²˜ë¦¬
        diaryForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const title = document.getElementById('title').value.trim();
            const date = document.getElementById('date').value;
            const content = document.getElementById('content').value.trim();

            if (!title || !date || !content) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¼ê¸° ì €ì¥
            const diary = {
                title: title,
                date: date,
                content: content
            };

            saveDiary(diary);

            // í¼ ì´ˆê¸°í™”
            diaryForm.reset();

            // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
            displayDiaries();

            // ì €ì¥ ì™„ë£Œ ì•Œë¦¼
            alert('ì¼ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });

        // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
        closeModalBtn.addEventListener('click', closeModal);

        // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        diaryModal.addEventListener('click', function(e) {
            if (e.target === diaryModal) {
                closeModal();
            }
        });

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && diaryModal.classList.contains('active')) {
                closeModal();
            }
        });

        // ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ì´ë²¤íŠ¸
        document.getElementById('navHome').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('diaryForm').scrollIntoView({ behavior: 'smooth' });
        });

        document.getElementById('navWrite').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('diaryForm').scrollIntoView({ behavior: 'smooth' });
        });

        document.getElementById('navList').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('diaryList').scrollIntoView({ behavior: 'smooth' });
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¼ê¸° ëª©ë¡ í‘œì‹œ
        window.addEventListener('DOMContentLoaded', function() {
            displayDiaries();
            // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
        });
    </script>
</body>
</html>
